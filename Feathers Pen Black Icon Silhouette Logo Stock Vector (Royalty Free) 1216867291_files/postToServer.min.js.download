for(var useRootDomainList=["bankofamerica.com","ml.com","merrilledge.com","bankcardservices.co.uk","tcsandbox.com"],useRootDomain,urdIndex=0;urdIndex<useRootDomainList.length;urdIndex++)if(-1!==window.location.href.indexOf(useRootDomainList[urdIndex])){useRootDomain=useRootDomainList[urdIndex];break}
var PersistentStorage=function(){function a(){if("undefined"==typeof k){var a=(new Date((new Date).getTime()+316224E5)).toUTCString(),b="inqPc="+(Math.floor(9E6*Math.random())+1E6).toString(16);document.cookie=b+"; path=/; expires="+a+";"+(-1!==window.location.href.indexOf(useRootDomain)?"domain="+useRootDomain+";":"");k=-1!==document.cookie.indexOf(b);document.cookie="inqPc=; path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT"}return k}function b(a,b){a&&window.console&&console.log&&(b?console.log(a,b):
console.log(a))}function c(a){var c=localStorage;"sessionStorage"==a&&(c=sessionStorage);var d={setValue:function(a,b,d){c.setItem("LSCACHE-"+a,d);c.setItem(a,b)}};return{getAllCookies:function(){var a="",d,f;try{for(var e in c)c.hasOwnProperty(e)&&0!==e.indexOf("LSCACHE-")&&(d=this.getItem(e),0===e.indexOf("inqCA")&&(f=sessionStorage.getItem("sinqCA"),!isNaN(f)&&0<f&&(d=0)),a+=""+e+"="+d+";")}catch(g){b("ERROR: Storage is not available. Can't get all data.")}return a},get:function(){var a={};try{for(var d in c)c.hasOwnProperty(d)&&
0!==d.indexOf("LSCACHE-")&&(a[d]=c.getItem(d))}catch(e){b("ERROR: Storage is not available. Can't get item for Safari.")}return a},getItem:function(a){var d=new Date;try{var e=c.getItem("LSCACHE-"+a);return null!==e&&"session"!==e&&(e=parseInt(e,10),!isNaN(e)&&e<d.getTime())?(this.removeItem("LSCACHE-"+a),this.removeItem(a),null):c.getItem(a)}catch(f){b("ERROR: Storage is not available. Can't get item.")}},setItem:function(a,c,e,f){if("undefined"!==typeof e&&""!==e){f=new Date;var g=parseInt(e,10);
isNaN(g)?(e=Date.parse(e),isNaN(e)?b("ERROR: PersistentStorage.cookieInstance: lifetime has to be a number or a date string"):e>f.getTime()?d.setValue(a,c,e):this.removeItem(a)):0<e?d.setValue(a,c,f.getTime()+e):this.removeItem(a)}else d.setValue(a,c,"session")},removeItem:function(a){try{c.removeItem("LSCACHE-"+a),c.removeItem(a)}catch(d){b("ERROR: Storage is not available. Can't remove item.")}},clear:function(){try{c.clear()}catch(a){b("ERROR: Storage is not available. Can't clear.")}},onUnload:function(){var a=
(new Date).getTime()+3E5,b;for(b in localStorage)0===b.indexOf("LSCACHE-")&&"session"===localStorage.getItem(b)&&c.setItem(b,a)},version:"localStorage.0.0.3"}}function d(){return{getAllCookies:function(){return document.cookie},get:function(){for(var a=document.cookie.split(";"),b="",c="",d=null,e=null,f=0;f<a.length;f++)b=a[f].split("="),c=b[0].replace(/^\s+|\s+$/g,""),1<b.length&&(d=decodeURIComponent(b[1].replace(/^\s+|\s+$/g,""))),null==e&&(e={}),e[c]=d;return e},getItem:function(a){a+="=";for(var b=
document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null},setItem:function(a,d,c,e){var f="";if("undefined"===typeof c||""===c)f="";else if(f=parseInt(c,10),isNaN(f)){f=Date.parse(c);if(isNaN(f)){b("ERROR: PersistentStorage.cookieInstance: days has to be a number or a date string");return}f=";expires="+c}else 0<f?(c=new Date,c.setTime(c.getTime()+f),f=";expires="+c.toUTCString()):
f=";expires=Thu, 01 Jan 1970 00:00:01 GMT";e=e&&("boolean"===typeof e||"string"===typeof e&&"true"===e.toLowerCase())?" secure;":"";document.cookie=a+"="+d+f+"; "+e+" path=/"+(-1!=window.location.href.indexOf(useRootDomain)?";domain="+useRootDomain:"")},removeItem:function(a){this.setItem(a,"",-1)},clear:function(){},onUnload:function(){},version:"cookie.0.0.3"}}var f,h,e,g=null,k,l=null;return{getInstance:function(k){if("localStorage"==k)return h||(h=c("localStorage")),h;if("sessionStorage"==k)return e||
(e=c("sessionStorage")),e;if(!f){if(a())g="cookie";else{k=!1;if(/firefox/i.test(window.navigator.userAgent))try{window.localStorage&&!/(iPad|iPhone).*OS 7/i.test(navigator.userAgent)&&(localStorage.setItem("inqPc",2),k=!0)}catch(n){b("WARNING window.localStorage is not supported and chat may not be offered.",n)}k?g="localStorage":(null==l&&(l=a()||""===document.cookie?!1:!0),l&&(g="cookie"))}f="cookie"===g?d():"localStorage"===g?c():null}return f},isLocalStorageUsed:function(){return f&&"localStorage"===
g},_testHook:{getCookieInstance:d,getLocalStorageInstance:c}}}();var ptStorage=PersistentStorage.getInstance(),hasStringSupport=!1,previousCommand="",xHRsInProgress={},xhrTimeoutController={},caUnloadController,beaconUnloadController,targetOrigin;function simpleChatPost(a){var b=a.indexOf("?");if(-1!=b){var c=a.substring(0,b);a=a.substring(b+1);b=getXMLHttpRequest();b.open("POST",c,!0);b.setRequestHeader("Content-type","application/x-www-form-urlencoded");b.send(a)}}
function doCommandsInClientDomain(a,b,c){b=[];"string"==typeof a?(b[0]=c,b[1]=a):b=a;hasStringSupport?parent.postMessage(convertArrToString(b),targetOrigin):parent.postMessage(b,targetOrigin)}function convertArrToString(a){for(var b=0;b<a.length;b++)a[b]=encodeURIComponent(a[b]);return a.join("||")}
function _executeCommandFromItems(a){if(a&&0<a.length)if("ONLOAD"===a[0])doCommandsInClientDomain([location.protocol+"//"+location.host]);else try{if(checkDataForSimplePost(a))simpleChatPost(a[0]);else try{doCommands(a)}catch(f){var b=a[3],c=a[1],d='if (inqFrame.Inq["proxyError"]!=null)inqFrame.Inq.proxyError("'+catchJsFormatter(f,a[0])+'");';doCommandsInClientDomain(d,b,c)}}catch(f){window.console&&window.console.error(f.message)}}
function checkDataForSimplePost(a){return/(^HTTP[s]?:).*/ig.test(a)}function whenLoaded(){try{targetOrigin=parseUrl(document.referrer).origin,window.addEventListener?window.addEventListener("message",whenPosted,!1):window.attachEvent?window.attachEvent("onmessage",whenPosted):window.onmessage=whenPosted}catch(a){window.console&&window.console.log(a.message)}parseCommand()}
function whenPosted(a){a=a?a:event;if(a.source===window)window.console&&window.console.error("Source window is equal to current window, command won't be executed.");else return(a=a.data)&&0<a.length&&("string"===typeof a?(hasStringSupport=!0,_executeCommandFromItems(a.split("||"))):(hasStringSupport=!1,_executeCommandFromItems(a))),!1}
function parseCommand(){var a=window.name;window.pIntervalId&&("undefined"!==typeof window.pIntervalCnt&&10<window.pIntervalCnt++||a&&0<a.length)&&clearInterval(window.pIntervalId);if(a&&0<a.length&&"_none"!=a&&(a=a.replace(previousCommand,""),0<a.length)){previousCommand=a;for(var a=a.split("&&"),b=0;b<a.length;b++)a[b]&&0<a[b].length&&_executeCommandFromItems(a[b].split("||"))}}
function setChatActiveFlag(a,b,c,d){caUnloadController&&caUnloadController.set(b);ptStorage.setItem(a,b,c,d);setSessionChatActiveFlagPS(b)}function getChatActiveFlag(a){try{var b=parseInt(ptStorage.getItem(a));return isNaN(b)?0:b}catch(c){return 0}}
function setSessionChatActiveFlagPS(a){if("undefined"===typeof a||isNaN(a))log("In setSessionChatActiveFlagPS(); requires one argument as a number");else try{PersistentStorage.isLocalStorageUsed()&&sessionStorage.setItem("sinqCA",a)}catch(b){log("Error while set sinqCA",b)}}function checkSameProtocolOrigin(a){return-1===a.indexOf(window.location.protocol)?a.replace(/^http:/i,window.location.protocol):a}
function pepareResponseData(a,b){var c=[];"unknown"!=typeof b.status?(c[0]=a,c[1]=b.responseText,c[2]=b.status,c[3]=b.getResponseHeader("Cache-Control")||"",c[4]=b.getResponseHeader("Content-Type")||""):c=[a,"","","",""];return c}function doAbortCommand(a){a=a[1];xHRsInProgress&&xHRsInProgress[a]&&xHRsInProgress[a].abort()}
function doPostChatCommand(a){var b="",c=a[0],d=a[1],f=a[3],h=a[4],e=a[5],g=parseInt(a[6])||0;a=a[7];try{var k=getXMLHttpRequest();xHRsInProgress[d]=k;k.open(e?"POST":"GET",h,!0);void 0!=k.timeout?k.timeout=g:xhrTimeoutController[d]=setTimeoutXHR(g,d,xHRsInProgress);k.onreadystatechange=function(){4==k.readyState&&(xhrTimeoutController[d]&&(clearTimeout(xhrTimeoutController[d]),delete xhrTimeoutController[d]),delete xHRsInProgress[d],doCommandsInClientDomain(pepareResponseData(d,k),f,d))};a&&k.setRequestHeader("X-Protection-Id",
encodeURIComponent(a));e?(k.setRequestHeader("Content-type","application/x-www-form-urlencoded"),k.send(decodeURIComponent(e))):k.send()}catch(l){b='if (inqFrame.Inq["proxyError"]!=null)inqFrame.Inq.proxyError("'+catchJsFormatter(l,c)+'");'+b,doCommandsInClientDomain(b,f,d)}}
function doSCBR3PMCommand(a){var b="",c,b=a[0],d=a[1],f=a[2],h=a[3];try{var e=a[4],g=a[5];PersistentStorage.getInstance(a[6]).setItem(e+"_"+f,g,a[7],a[8]);c={action:"3rdPCQ"};doCommandsInClientDomain(JSON.stringify(c),h,d)}catch(k){b='if (inqFrame.Inq["proxyError"]!=null)inqFrame.Inq.proxyError("'+catchJsFormatter(k,b)+'");inqFrame.Inq.FlashPeer.set3rdPartyCookieFromQueue();\n',doCommandsInClientDomain(b,h,d)}}
function doGCBR3Command(a){var b="",c=a[0],d=a[1],f=a[2];a=a[3];if(ptStorage)try{if(f)var h=ptStorage.getItem(f),b=f+"="+h;else{var e=getAllData();""===e&&(e="inqPc=1");b=e}doCommandsInClientDomain(b,a,d)}catch(g){b='if (inqFrame.Inq["proxyError"]!=null)inqFrame.Inq.proxyError("'+catchJsFormatter(g,c)+'");'+b,doCommandsInClientDomain(b,a,d)}else doCommandsInClientDomain("no-cookie",a,d)}
function doCommitPointCommand(a){var b="",c,d=a[0],f=a[1],h=a[2];a=a[3];try{var e=unescape(ptStorage.getItem("inqVital_"+h)),g=/\bvcnt:([0-9]+)/.exec(e);g||(g=/\bvcnt":([0-9]+)/.exec(e));c={action:"W3rdCC",resp:2==g.length?g[1]:0};doCommandsInClientDomain(JSON.stringify(c),a,f)}catch(k){b='if (inqFrame.Inq["proxyError"]!=null)inqFrame.Inq.proxyError("'+catchJsFormatter(k,d)+'");'+b,doCommandsInClientDomain(b,a,f)}}
function doDumpCommand(a){var b="",c=a[0],d=a[1],f=a[3];try{var h=decodeURIComponent(a[4]),e="_rand="+Math.round(0xe8d4a51001*Math.random()).toString(36)+"&level=info&line=document.cookie: "+encodeURIComponent(""+document.cookie),g=getXMLHttpRequest();xHRsInProgress[d]=g;g.open("POST",h,!0);g.onreadystatechange=function(){4==g.readyState&&(delete xHRsInProgress[d],doCommandsInClientDomain("",f,d))};g.setRequestHeader("Content-type","application/x-www-form-urlencoded");g.send(e)}catch(k){b='if (inqFrame.Inq["proxyError"]!=null)inqFrame.Inq.proxyError("'+
catchJsFormatter(k,c)+'");'+b,doCommandsInClientDomain(b,f,d)}}
function doPOSTBR30Command(a){var b="",c=a[0],d=a[1],f=a[3];try{var h=decodeURIComponent(a[4]),e=h.indexOf("?"),g=h.substring(0,e),g=checkSameProtocolOrigin(g),k=h.substring(e+1),l=getXMLHttpRequest();xHRsInProgress[d]=l;l.open("POST",g,!0);l.onreadystatechange=function(){4==l.readyState&&(delete xHRsInProgress[d],doCommandsInClientDomain(pepareResponseData(d,l),f,d))};var m;try{m=JSON.parse(a[5])}catch(p){}if(m&&"object"===typeof m)for(var n in m)l.setRequestHeader(n,m[n]);l.setRequestHeader("Content-type",
"application/x-www-form-urlencoded");l.send(k)}catch(p){b='if (inqFrame.Inq["proxyError"]!=null)inqFrame.Inq.proxyError("'+catchJsFormatter(p,c)+'");'+b,console&&console.error&&console.error("Error on post operation: "+b,p),doCommandsInClientDomain(b,f,d)}}
function doPOSTJSONCommand(a){var b="",c=a[0],d=a[1],f=a[3];try{var h=decodeURIComponent(a[4]),e=h.indexOf("?"),g=h.substring(0,e),g=checkSameProtocolOrigin(g),k=h.substring(e+1),l=getXMLHttpRequest();xHRsInProgress[d]=l;l.open("POST",g,!0);l.onreadystatechange=function(){4==l.readyState&&(delete xHRsInProgress[d],doCommandsInClientDomain(pepareResponseData(d,l),f,d))};l.setRequestHeader("Content-type","application/json;charset=UTF-8");l.send(k)}catch(m){b='if (inqFrame.Inq["proxyError"]!=null)inqFrame.Inq.proxyError("'+
catchJsFormatter(m,c)+'");'+b,console&&console.error&&console.error("Error on post operation: "+b,m),doCommandsInClientDomain(b,f,d)}}
function doCobrowseCommand(a){var b,c=a[0],d=a[1],f=a[3],h=a[4];6<a.length?(a.splice(0,5),b=a.join("||")):b=a[5];try{var e=getXMLHttpRequest();xHRsInProgress[d]=e;e.open("POST",h,!0);e.onreadystatechange=function(){4==e.readyState&&(delete xHRsInProgress[d],b={resp:encodeURIComponent(e.responseText),id:d,action:"ack"},doCommandsInClientDomain(JSON.stringify(b),f,d))};e.setRequestHeader("Content-type","application/octet-stream");e.send(b)}catch(g){b={resp:c,id:d,action:"error",log:catchJsFormatter(g,
c)},doCommandsInClientDomain(JSON.stringify(b),f,d)}}function doCBAUTHCommand(a){var b,c=a[0],d=a[1],f=a[2],h=a[3];try{var e=a[4],g=a[5];ptStorage.setItem(e+"_"+f,g,a[7],a[8]);g=ptStorage.getItem(e+"_"+f);b={resp:g,id:d,action:"auth"};doCommandsInClientDomain(JSON.stringify(b),h,d)}catch(k){b={resp:c,id:d,action:"error",log:catchJsFormatter(k,c)},doCommandsInClientDomain(JSON.stringify(b),h,d)}}
function doCBCheckCommand(a){var b,c=a[0],d=a[1],f=a[2];a=a[3];try{b={resp:ptStorage.getItem("cobrowse_"+f),id:d,action:"auth"},doCommandsInClientDomain(JSON.stringify(b),a,d)}catch(h){b={resp:c,id:d,action:"error",log:catchJsFormatter(h,c)},doCommandsInClientDomain(JSON.stringify(b),a,d)}}
function doChatActiveCommand(a){try{var b=a[2],c=parseStringToBoolean(a[3]),d=1E3*parseInt(a[4]),f=a[5],h="inqCA_"+b;a=c?2:1;setChatActiveFlag(h,a,"",f);caUnloadController||(caUnloadController=new UnloadController(function(a){a=caUnloadController.get();var c=getChatActiveFlag(h);0!=a&&c==a&&(setChatActiveFlag(h,0,"",f),ptStorage.setItem("inqLT_"+b,""+(new Date).getTime(),d,f),ptStorage.onUnload())},null,a));caUnloadController.activate()}catch(e){}}
function chatDeactivate(a){var b=a[1],c=a[3];a="inqCA_"+a[2];caUnloadController&&caUnloadController.deactivate();if("UNLOAD_HANDLER"!==b)try{setChatActiveFlag(a,0,"",c)}catch(d){}}
function doBeaconCommand(a){function b(a,b,c){beaconUnloadController.activate();beaconUnloadController.set(a);beaconUnloadController.url=b;beaconUnloadController.complete=c}var c=a[1];beaconUnloadController||(beaconUnloadController=new UnloadController(function(a){parseCommand();beaconUnloadController.complete||(a=beaconUnloadController.url,a+="&timestamp="+(new Date).getTime(),sendBeacon(a,beaconUnloadController.get()),beaconUnloadController.complete=!0)}));"ACTIVATE"==c?b(a[2],a[3],!1):"DEACTIVATE"==
c?beaconUnloadController.deactivate():c&&-1<c.indexOf("activeWindowUnload")?b(a[5],a[4],!1):"DATA"==c&&beaconUnloadController.set(a[2])}
function doCommands(a){var b="",b=a[0];switch(b){case "ABORT":doAbortCommand(a);break;case "POSTCHAT":doPostChatCommand(a);break;case "SCBR3_PM":doSCBR3PMCommand(a);break;case "GCBR3":doGCBR3Command(a);break;case "COMMITPOINT":doCommitPointCommand(a);break;case "DUMP":doDumpCommand(a);break;case "POSTBR30":doPOSTBR30Command(a);break;case "POSTJSON":doPOSTJSONCommand(a);break;case "COBROWSE":doCobrowseCommand(a);break;case "CBAUTH":doCBAUTHCommand(a);break;case "CBCHECK":doCBCheckCommand(a);break;
case "CHATACTIVE":doChatActiveCommand(a);break;case "CHATDEACTIVATE":chatDeactivate(a);break;case "BEACON":doBeaconCommand(a);break;case "POSTSYNC":doPostSyncCommand(a);break;default:if(3<a.length){var c=a[1];a=a[3];var d=Error("Undefined Request for ["+b+"] command");try{throw d.name="Syntax Error",d;}catch(f){b='if (inqFrame.Inq["proxyError"]!=null)inqFrame.Inq.proxyError("'+catchJsFormatter(f,b)+'");',doCommandsInClientDomain(b,a,c)}}}}
function doPostSyncCommand(a){var b="",c=a[0],d=a[1],f=a[3];try{var h=decodeURIComponent(a[4]),e=h.indexOf("?"),g=h.substring(0,e),g=checkSameProtocolOrigin(g),k=h.substring(e+1),l=getXMLHttpRequest();xHRsInProgress[d]=l;l.open("POST",g,!1);l.setRequestHeader("Content-type","application/x-www-form-urlencoded");var m;try{m=JSON.parse(a[5])}catch(p){}if(m&&"object"===typeof m)for(var n in m)l.setRequestHeader(n,m[n]);l.send(k);delete xHRsInProgress[d];doCommandsInClientDomain(pepareResponseData(d,l),
f,d)}catch(p){b='if (inqFrame.Inq["proxyError"]!=null)inqFrame.Inq.proxyError("'+catchJsFormatter(p,c)+'");'+b,console&&console.error&&console.error("Error on post operation: "+b,p),doCommandsInClientDomain(b,f,d)}}function getAllData(){var a=PersistentStorage.getInstance("cookie"),b=a.getAllCookies().concat("; "),a=PersistentStorage.getInstance("localStorage"),b=b+a.getAllCookies(),a=PersistentStorage.getInstance("sessionStorage");return b+=a.getAllCookies()}whenLoaded();function getXMLHttpRequest(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw Error("Impossible to create XMLHttpRequest object.");}function setTimeoutXHR(a,b,c){if(0<a&&c)return setTimeout(function(){c[b]&&c[b].abort()},a)}
function toJsString(a,b){if("string"==typeof a){var c;c=a.split("\\").join("\\\\");c=c.split('"').join('\\"');c=c.split("'").join("\\'");c=c.split("\n").join("\\n");c=c.split("\r").join("\\r");c=c.split("\t").join("\\t");b&&(c=b+c+b);return c}return a}function log(a,b){a&&window.console&&console.log&&(b?console.log(a,b):console.log(a))}
function formatArgument(a){try{var b="[unknown]";try{b="object"==typeof a?null!=a.constructor?a.constructor.toString():""+a:"("+typeof a+")"}catch(d){b=""+a}-1!=b.indexOf("function")&&(b=b.split("\n").join(" ").replace(/^\s*function (\w+)\s*\(\)[^\n]*/g,"[object $1]"));if("(boolean)"==b||"[object Boolean]"==b)b=a?"true":"false";if("(string)"==b||"[object String]"==b)b=toJsString(a,'"');if("(array)"==b||"[object Array]"==b){for(var b="",c=0;c<a.length&&!(b+=(0!=b.length?",":"")+formatArgument(a[c]),
128<b.length);c++);128<b.length&&(b=b.substr(0,125)+"...");return"["+b+"]"}return b}catch(d){return"[argument]"}}
function getStackTrace(a){try{var b=[];try{d.dont.exist+=0}catch(n){if(!n.stack&&window.opera&&n.message){for(var c=n.message.split("\n"),d=0,f=c.length;d<f;d++)if(c[d].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){var h=c[d];c[d+1]&&(h+=" at "+c[d+1],d++);b.push(h)}b.shift();b.shift();return b.join("\n\t\t")}}if(arguments&&arguments.callee&&arguments.callee.caller){for(var e=arguments.callee.caller.caller;e;){var g=""+e.toString(),k=g.indexOf("function ")+9,l=g.indexOf("(",k),m=g.substring(k,l)||"anonymous function",
c="";if(e.arguments.length)for(d=0;d<e.arguments.length;d++)c+=(0!=c.length?",":"")+formatArgument(e.arguments[d]);b.push(m+"("+c+")");e=e.caller}return"stack trace:\n\t\t"+b.join("\n\t\t")}return""}catch(n){return""}}function catchJsFormatter(a,b){try{var c="\tERROR while processing "+b+": "+a.name+" - "+a.message,c=c+("\n\t"+getStackTrace(a));return toJsString(c)}catch(d){return""}}function parseStringToBoolean(a){return"string"==typeof a?"true"==a:a}
function _addEventListener(a,b,c,d){d||(d=!1);window.addEventListener?a.addEventListener(b,c,d):window.attachEvent&&a.attachEvent("on"+b,c)}function sendBeacon(a,b){navigator.sendBeacon?navigator.sendBeacon(a,b):sendBeaconByXHR(a,b)}function sendBeaconByXHR(a,b){var c=getXMLHttpRequest();c.open("POST",a,!1);c.setRequestHeader("Content-Type","text/plain;charset=UTF-8");c.send(b)}
function parseUrl(a){var b=a.match(/^(https?):\/\/([^\/:]+)(:?(\d*))/),c=b[1],d=b[2],f=0<=d.indexOf(".")&&3<=d.split(".").length?d.split(".").slice(1).join("."):d,b=b[4]?b[4]:"http"===c?"80":"https"===c?"443":null,h=c+"://"+d;null!==b&&"80"!==b&&"443"!==b&&(h+=":"+b);return{origin:h,href:a,protocol:c,domain:f,host:d,port:b}};function UnloadController(a,b,c){this.active=!1;this.handler=a;this._value=c||null;if(b)for(var d in b)this[d]=b[d]}UnloadController.prototype.activate=function(){if(!this.onunload){this.onunload=function(a){this.isActive()&&(this.handler(a),this.deactivate())};var a=this;this._addUnloadHandler(function(b){b=b||window.event;a.onunload(b)})}this.active=!0};UnloadController.prototype.deactivate=function(){this.active=!1};UnloadController.prototype.isActive=function(){return this.active};
UnloadController.prototype.set=function(a){this._value=a};UnloadController.prototype.get=function(){return this._value};UnloadController.prototype._addUnloadHandler=function(a,b){_addEventListener(window,"unload",a,b);_addEventListener(window,"beforeunload",a,b);_addEventListener(window,"pagehide",a,b)};
